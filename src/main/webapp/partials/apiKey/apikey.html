
<div id="content-header">
    <h1>API Key</h1>
    <div class="btn-group">
        <a class="btn btn-large tip-bottom" title="Manage Files"><i class="icon-file"></i></a>
        <a class="btn btn-large tip-bottom" title="Manage Users"><i class="icon-user"></i></a>
        <a class="btn btn-large tip-bottom" title="Manage Comments"><i class="icon-comment"></i><span class="label label-important">5</span></a>
        <a class="btn btn-large tip-bottom" title="Manage Orders"><i class="icon-shopping-cart"></i></a>
    </div>
</div>
<div id="breadcrumb">
    <a href="#" title="Go to Home" class="tip-bottom"><i class="icon-home"></i> Home</a>
    <a href="#" class="current">API Key</a>
</div>
<div class="container-fluid">
    <div>
        <alert ng-repeat="alert in apiKeyAlerts" type="{{alert.type}}" close="closeAlert($index)">{{alert.msg}}</alert>
    </div>
    <div class="row-fluid" ng-show="apiKeyStep == 1">
        <div class="span12">
            <br />
            <button class="btn btn-success" ng-click="showApiKeyCreateForm()">New</button>
            <div class="widget-box">
                <div class="widget-title">
                    <span class="icon">
                        <i class="icon-th"></i>
                    </span>
                    <h5>API Keys</h5>
                </div>
                <div class="widget-content nopadding">
                    <span ng-init="init()" ></span>
                    <table class="table table-bordered table-striped table-hover">
                        <thead>
                            <tr>
                                <th>UUID <i class="fa fa-tag"></i></th>
                                <th>Name<i class="fa fa-sort"></i></th>
                                <th>Role<i class="fa fa-sort"></i></th>
                                <th>API Key<i class="fa fa-sort"></i></th>
                                <th>Status <i class="fa fa-sort"></i></th>
                                <th>Created<i class="fa fa-sort"></i></th>
                                <th>Actions<i class="fa fa-sort"></i></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="apiKey in domainApiKeys">
                                <td>{{apiKey.uuid}}</td>
                                <td>{{apiKey.name}}</td>
                                <td>{{apiKey.role.name}}</td>
                                <td>{{apiKey.credential.apiKey}}</td>
                                <td>{{apiKey.credential.status}}</td>
                                <td>{{apiKey.dateCreated}}</td>
                                <td style="text-align: center">
                                    <a href="" class="tip-top" ng-click="showApiKeyUpdateForm(apiKey)" data-original-title="View"><i class="icon-pencil"></i></a>
                                    <a href="" class="tip-top" ng-click="openDialog(apiKey)" data-original-title="Delete"><i class="icon-trash"></i></a>
                                </td>
                            </tr>
                        </tbody>
                    </table>								
                </div>
            </div>
        </div>
    </div>


    <div class="row-fluid" ng-show="apiKeyStep == 2">
        <div class="span8">
            <div class="widget-box">
                <div class="widget-title">
                    <span class="icon">
                        <i class="icon-align-justify"></i>									
                    </span>
                    <h5>Owned Domains</h5>
                </div>
                <div ng-submit="create()" class="widget-content nopadding">
                    <form class="form-horizontal">
                        <div class="control-group">
                            <label class="control-label">Name</label>
                            <div class="controls">
                                <input type="text" ng-model="selectedApiKey.name"/>
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">Role</label>
                            <div class="controls">
                                <select ng-options="role as role.name for role in systemRoles track by role.id " ng-model="selectedApiKey.role">
                                </select>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-success">Create</button>
                            <button type="button" class="btn" ng-click="showApiKeyList()">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>						
        </div>
    </div>

    <div class="row-fluid" ng-show="apiKeyStep == 3">
        <div class="span8">
            <div class="widget-box">
                <div class="widget-title">
                    <span class="icon">
                        <i class="icon-align-justify"></i>									
                    </span>
                    <h5>Owned Domains</h5>
                </div>
                <div ng-submit="update()" class="widget-content nopadding">
                    <form class="form-horizontal">
                        <div class="control-group">
                            <label class="control-label">Name</label>
                            <div class="controls">
                                <input type="text" ng-model="selectedApiKey.name" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">Role</label>
                            <div class="controls">
                                <select ng-options="role as role.name for role in systemRoles track by role.id " ng-model="selectedApiKey.role">
                                </select>
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">Status</label>
                            <div class="controls">
                                <select ng-options="status for status in apiKeyStatuses" ng-model="selectedApiKey.credential.status">
                                </select>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Update</button>
                            <button type="button" class="btn" ng-click="showApiKeyList()">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>						
        </div>
    </div> 
    
    <div class="row-fluid" ng-show="apiKeyStep == 4">
         <div class="span12">
            <div class="widget-box">
                <div class="widget-title">
                    <span class="icon">
                        <i class="icon-th"></i>
                    </span>
                    <h5>Domain Details</h5>
                </div>
                <div class="widget-content">
                    <div class="form-horizontal">
                        <div class="control-group">
                            <label><b>Copy your API Key, you will no longer be able to see it again</b></label>

                            <br />
                            <br />
                        </div>
                        <div class="control-group">
                            <label><b>Name</b></label>
                            <label> {{createdCredential.name}}</label>
                            <br />
                        </div>
                        <div class="control-group">
                            <label><b>Role</b></label>
                            <label>{{createdCredential.role.name}}</label>
                            <br />
                        </div>
                        <div class="control-group">
                            <label><b>API Key</b></label>
                            <label>{{createdCredential.credential.apiKey}}</label>
                            <br />
                        </div>
                        <div class="form-actions">
                            <button class="btn" ng-click="dismiss()">OK</button>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    
    </div>

</div>

