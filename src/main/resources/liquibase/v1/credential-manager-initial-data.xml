<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.3.xsd http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
    
    <property name="now" value="now()" dbms="mysql" />
    <property name="now" value="CURRENT_TIMESTAMP()" dbms="h2" />  
    
    <!-- Manager 1 -->
    <changeSet author="Josue" id="credential-manager-initial-data-1">
        <insert tableName="manager">
            <column name="uuid" value="926caa10-43a4-11e4-916c-0800200c9a66"/>
            <column name="date_created" value="${now}"/>
            <column name="email" value="josue.eduardo206@gmail.com"/>
            <column name="first_name" value="Josue"/>
            <column name="last_name" value="Eduardo"/>
        </insert>
    </changeSet>
    
    <changeSet author="Josue" id="credential-manager-initial-data-2">
        <insert tableName="manager_credential">
            <column name="uuid" value="0171597c-dfcf-4563-a4fe-345fa3818c9d"/>
            <column name="date_created" value="${now}"/>
            <column name="status" value="ACTIVE"/>
            <column name="login" value="josueeduardo"/>
            <column name="password" value="123456"/>
            <column name="manager_uuid" value="926caa10-43a4-11e4-916c-0800200c9a66"/>
        </insert>
    </changeSet>
    
    <!-- API Credential isnt bound to a specific Domain, but is independent for validation purposes-->
    <changeSet author="Josue" id="credential-manager-initial-data-3">
        <insert tableName="api_credential">
            <column name="uuid" value="7ddb6165-70d2-45c6-9e0a-f4b80b070f24"/>
            <column name="date_created" value="${now}"/>
            <column name="status" value="ACTIVE"/>
            <column name="api_key" value="tmfkrkileqo65hjl9udm550hip"/>
            <column name="manager_uuid" value="926caa10-43a4-11e4-916c-0800200c9a66"/>
        </insert>
        <insert tableName="api_credential">
            <column name="uuid" value="c945a80c-2290-4ecf-9a51-ef12d947df08"/>
            <column name="date_created" value="${now}"/>
            <column name="status" value="ACTIVE"/>
            <column name="api_key" value="3plnaja8j9viecc98e156ss9ks"/>
            <column name="manager_uuid" value="926caa10-43a4-11e4-916c-0800200c9a66"/>
        </insert>
    </changeSet>
    
    <changeSet author="Josue" id="credential-manager-initial-data-4">
        <insert tableName="domain">
            <column name="uuid" value="70f4b4b0-18d2-4707-824b-b30af193d99b"/>
            <column name="date_created" value="${now}"/>
            <column name="status" value="ACTIVE"/>
            <column name="description" value="Default Domain"/>
            <column name="name" value="Domain 1"/>
            <column name="owner_uuid" value="926caa10-43a4-11e4-916c-0800200c9a66"/>
        </insert>
    </changeSet>
    
    <!-- Default Domain Permissions -->
    <changeSet author="Josue" id="credential-manager-initial-data-5">
        <insert tableName="domain_permission">
            <column name="uuid" value="d1486e7e-611c-47eb-bba1-28e6d4adca95"/>
            <column name="description" value="ROLE LEVEL 1"/>
            <column name="level" value="1"/>
            <column name="name" value="ROLE_LEVEL_1"/>
            <column name="domain_uuid" value="70f4b4b0-18d2-4707-824b-b30af193d99b"/>
        </insert>
        <insert tableName="domain_permission">
            <column name="uuid" value="6c0dca33-5e1a-4660-8188-5e4db9f310b6"/>
            <column name="description" value="ROLE LEVEL 2"/>
            <column name="level" value="2"/>
            <column name="name" value="ROLE_LEVEL_2"/>
            <column name="date_created" value="${now}"/>
            <column name="domain_uuid" value="70f4b4b0-18d2-4707-824b-b30af193d99b"/>
        </insert>
        <insert tableName="domain_permission">
            <column name="uuid" value="3cbf4057-e22c-40ce-a738-9020345aa60b"/>
            <column name="description" value="ROLE LEVEL 3"/>
            <column name="level" value="3"/>
            <column name="name" value="ROLE_LEVEL_3"/>
            <column name="date_created" value="${now}"/>
            <column name="domain_uuid" value="70f4b4b0-18d2-4707-824b-b30af193d99b"/>
        </insert>
        <insert tableName="domain_permission">
            <column name="uuid" value="9b37bc34-db06-4afe-9b45-fc30f82d6bb2"/>
            <column name="description" value="ROLE LEVEL 4"/>
            <column name="level" value="4"/>
            <column name="name" value="ROLE_LEVEL_4"/>
            <column name="date_created" value="${now}"/>
            <column name="domain_uuid" value="70f4b4b0-18d2-4707-824b-b30af193d99b"/>
        </insert>
        <insert tableName="domain_permission">
            <column name="uuid" value="94730d8e-c616-491d-adce-df94b2fb7a6e"/>
            <column name="description" value="ROLE LEVEL 5"/>
            <column name="level" value="5"/>
            <column name="name" value="ROLE_LEVEL_5"/>
            <column name="date_created" value="${now}"/>
            <column name="domain_uuid" value="70f4b4b0-18d2-4707-824b-b30af193d99b"/>
        </insert>
    </changeSet>
    
  
    <!-- The owner should be joined to its Domains-->
    <changeSet author="Josue" id="credential-manager-initial-data-6">
        <insert tableName="manager_domain_credential">
            <column name="uuid" value="582edf67-3894-4ae6-91d7-1990277632ce"/>
            <column name="date_created" value="${now}"/>
            <column name="domain_uuid" value="70f4b4b0-18d2-4707-824b-b30af193d99b"/>
            <column name="domain_permission_uuid" value="94730d8e-c616-491d-adce-df94b2fb7a6e"/> <!-- Should be the greatest value -->
            <column name="manager_credential_uuid" value="0171597c-dfcf-4563-a4fe-345fa3818c9d"/>
        </insert>
    </changeSet>
    
    <changeSet author="Josue" id="credential-manager-initial-data-7">
        <insert tableName="api_domain_credential">
            <column name="uuid" value="7c6b358e-61c5-4a8a-ae47-6bcc0d14fdcd"/>
            <column name="date_created" value="${now}"/>
            <column name="name" value="User API key"/>
            <column name="domain_permission_uuid" value="6c0dca33-5e1a-4660-8188-5e4db9f310b6"/>
            <column name="domain_uuid" value="70f4b4b0-18d2-4707-824b-b30af193d99b"/>
            <column name="api_credential_uuid" value="7ddb6165-70d2-45c6-9e0a-f4b80b070f24"/>
        </insert>
        <insert tableName="api_domain_credential">
            <column name="uuid" value="c5baf7ae-d03a-42a6-8231-ea8e5e30a96a"/>
            <column name="date_created" value="${now}"/>
            <column name="name" value="Admin API key"/>
            <column name="domain_permission_uuid" value="d1486e7e-611c-47eb-bba1-28e6d4adca95"/>
            <column name="domain_uuid" value="70f4b4b0-18d2-4707-824b-b30af193d99b"/>
            <column name="api_credential_uuid" value="c945a80c-2290-4ecf-9a51-ef12d947df08"/>
        </insert>
    </changeSet>
    
    <!-- ********************** -->
    
    <!-- Manager 2 -->
    <changeSet author="Josue" id="credential-manager-initial-data-8">
        <insert tableName="manager">
            <column name="uuid" value="f7a6e165-d76a-466e-b8fe-8db98c748b72"/>
            <column name="date_created" value="${now}"/>
            <column name="email" value="manager2@gmail.com"/>
            <column name="first_name" value="James"/>
            <column name="last_name" value="Smith"/>
        </insert>
    </changeSet>
    
    <changeSet author="Josue" id="credential-manager-initial-data-9">
        <insert tableName="manager_credential">
            <column name="uuid" value="0ae893b5-68c3-42c0-ab83-094bd9323435"/>
            <column name="date_created" value="${now}"/>
            <column name="status" value="ACTIVE"/>
            <column name="login" value="jamessmith"/>
            <column name="password" value="123"/>
            <column name="manager_uuid" value="f7a6e165-d76a-466e-b8fe-8db98c748b72"/>
        </insert>
    </changeSet>
    
    <!-- API Credential isnt bound to a specific Domain, but is independent for validation purposes-->
    <changeSet author="Josue" id="credential-manager-initial-data-10">
        <insert tableName="api_credential">
            <column name="uuid" value="2f70e676-2086-4e00-bafc-279f1faf63c9"/>
            <column name="date_created" value="${now}"/>
            <column name="status" value="ACTIVE"/>
            <column name="api_key" value="5thnn30pleqo65hjl9u78tffsz3"/>
            <column name="manager_uuid" value="f7a6e165-d76a-466e-b8fe-8db98c748b72"/>
        </insert>
        <insert tableName="api_credential">
            <column name="uuid" value="e7a5b5dc-6b52-472c-b5b9-79366ec61f0b"/>
            <column name="date_created" value="${now}"/>
            <column name="status" value="ACTIVE"/>
            <column name="api_key" value="8ffteclaj9viecc98e157888rr"/>
            <column name="manager_uuid" value="f7a6e165-d76a-466e-b8fe-8db98c748b72"/>
        </insert>
        <insert tableName="api_credential">
            <column name="uuid" value="1d5fe8eb-be6e-4f40-a4d1-fb9b35e81cb4"/>
            <column name="date_created" value="${now}"/>
            <column name="status" value="ACTIVE"/>
            <column name="api_key" value="acbd30pleqo65hjl9u78111250"/>
            <column name="manager_uuid" value="f7a6e165-d76a-466e-b8fe-8db98c748b72"/>
        </insert>
    </changeSet>
    
    <changeSet author="Josue" id="credential-manager-initial-data-11">
        <insert tableName="domain">
            <column name="uuid" value="0a3cd775-bf26-4b5b-82bf-a75da9efd98a"/>
            <column name="date_created" value="${now}"/>
            <column name="status" value="ACTIVE"/>
            <column name="description" value="Domain 2"/>
            <column name="name" value="Sample domain 2"/>
            <column name="owner_uuid" value="f7a6e165-d76a-466e-b8fe-8db98c748b72"/>
        </insert>
    </changeSet>
    
    <!-- Default Domain Permissions -->
    <changeSet author="Josue" id="credential-manager-initial-data-12">
        <insert tableName="domain_permission">
            <column name="uuid" value="70edd171-6105-4fb6-9fb7-cf795e5f69a7"/>
            <column name="description" value="CAN READ"/>
            <column name="level" value="1"/>
            <column name="name" value="READ"/>
            <column name="domain_uuid" value="0a3cd775-bf26-4b5b-82bf-a75da9efd98a"/>
        </insert>
        <insert tableName="domain_permission">
            <column name="uuid" value="738e78a1-3c97-4d2c-8464-53c882677f7b"/>
            <column name="description" value="CAN WRITE"/>
            <column name="level" value="2"/>
            <column name="name" value="WRITE"/>
            <column name="date_created" value="${now}"/>
            <column name="domain_uuid" value="0a3cd775-bf26-4b5b-82bf-a75da9efd98a"/>
        </insert>
        <insert tableName="domain_permission">
            <column name="uuid" value="a46b2884-a1fd-4d9b-9f2f-d886d8e64b33"/>
            <column name="description" value="CAN MANAGE"/>
            <column name="level" value="3"/>
            <column name="name" value="ADMIN"/>
            <column name="date_created" value="${now}"/>
            <column name="domain_uuid" value="0a3cd775-bf26-4b5b-82bf-a75da9efd98a"/>
        </insert>
    </changeSet>
    
    
    <!-- The owner should be joined to its Domains-->
    <changeSet author="Josue" id="credential-manager-initial-data-13">
        <insert tableName="manager_domain_credential">
            <column name="uuid" value="c1465172-6b7b-4c40-a0dd-1d5ffcb342a7"/>
            <column name="date_created" value="${now}"/>
            <column name="domain_uuid" value="0a3cd775-bf26-4b5b-82bf-a75da9efd98a"/>
            <column name="domain_permission_uuid" value="a46b2884-a1fd-4d9b-9f2f-d886d8e64b33"/> <!-- Should be the greatest value -->
            <column name="manager_credential_uuid" value="0ae893b5-68c3-42c0-ab83-094bd9323435"/>
        </insert>
    </changeSet>
    
    <changeSet author="Josue" id="credential-manager-initial-data-15">
        <insert tableName="api_domain_credential">
            <column name="uuid" value="7bd057b2-61a8-434a-8812-8b08941870bf"/>
            <column name="date_created" value="${now}"/>
            <column name="name" value="USER API KEY access"/>
            <column name="domain_permission_uuid" value="738e78a1-3c97-4d2c-8464-53c882677f7b"/>
            <column name="domain_uuid" value="0a3cd775-bf26-4b5b-82bf-a75da9efd98a"/>
            <column name="api_credential_uuid" value="2f70e676-2086-4e00-bafc-279f1faf63c9"/>
        </insert>
        <insert tableName="api_domain_credential">
            <column name="uuid" value="ea2be770-2fd4-4975-b160-45454a0ecccc"/>
            <column name="date_created" value="${now}"/>
            <column name="name" value="USER API KEY access 2"/>
            <column name="domain_permission_uuid" value="a46b2884-a1fd-4d9b-9f2f-d886d8e64b33"/>
            <column name="domain_uuid" value="0a3cd775-bf26-4b5b-82bf-a75da9efd98a"/>
            <column name="api_credential_uuid" value="e7a5b5dc-6b52-472c-b5b9-79366ec61f0b"/>
        </insert>
        <insert tableName="api_domain_credential">
            <column name="uuid" value="f5634222-d6da-49ec-aec4-50f5e002ad1d"/>
            <column name="date_created" value="${now}"/>
            <column name="name" value="ADMIN API KEY access"/>
            <column name="domain_permission_uuid" value="70edd171-6105-4fb6-9fb7-cf795e5f69a7"/>
            <column name="domain_uuid" value="0a3cd775-bf26-4b5b-82bf-a75da9efd98a"/>
            <column name="api_credential_uuid" value="1d5fe8eb-be6e-4f40-a4d1-fb9b35e81cb4"/>
        </insert>
    </changeSet>
    
    <!-- ********** Joined Domains ************ -->
    <!-- Manager 1 has USER access to domain 2 -->
    <changeSet author="Josue" id="credential-manager-initial-data-16">
        <insert tableName="manager_domain_credential">
            <column name="uuid" value="9a755071-f61f-42d9-8338-465190ca469e"/>
            <column name="date_created" value="${now}"/>
            <column name="domain_uuid" value="0a3cd775-bf26-4b5b-82bf-a75da9efd98a"/>
            <column name="domain_permission_uuid" value="70edd171-6105-4fb6-9fb7-cf795e5f69a7"/>
            <column name="manager_credential_uuid" value="0171597c-dfcf-4563-a4fe-345fa3818c9d"/>
        </insert>
    </changeSet> 
    
    <!-- Manager 2 has USER access to domain 1 -->
    <changeSet author="Josue" id="credential-manager-initial-data-17">
        <insert tableName="manager_domain_credential">
            <column name="uuid" value="903fb65f-766b-4c1b-b591-13f606a8dc93"/>
            <column name="date_created" value="${now}"/>
            <column name="domain_uuid" value="70f4b4b0-18d2-4707-824b-b30af193d99b"/>
            <column name="domain_permission_uuid" value="738e78a1-3c97-4d2c-8464-53c882677f7b"/>
            <column name="manager_credential_uuid" value="0ae893b5-68c3-42c0-ab83-094bd9323435"/>
        </insert>
    </changeSet>
    
</databaseChangeLog>
